# Уровень 1

## Выбор технологии для реализации микрофронтендов

Для реализации микрофронтендов мне были даны два варианта: **single-spa** и **Webpack Module Federation**. 
Подробно изучив документацию к каждому из инструментов, я пришёл к выводу, что реализация с использованием 
**Webpack Module Federation** подойдёт лучше, поскольку этот функционал уже поставляется в Webpack, который
подключен к React-проекту. Это позволит не плодить зоопарк используемых технологий на проекте и всё ещё
позволяет решить поставленную задачу.

## Структура проекта

Проект имеет следующую структуру:

- директория **components** - содержит в себе реализации и абстракции компонентов;
- директория **blocks** - содержит в себе стили для отдельных блоков приложения;
- директория **contexts** - содержит в себе один контекст, который предоставляет доступ вложенным компонентам 
  доступ к информации о текущем пользователе;
- директория **images** - содержит в себе статичные изображения, которые используются на странице: например 
  для иконок различных кнопок; 
- директория **utils** - содержит в себе утилиты для работы с API и аутентификацией;
- директория **vendors** - содержит в себе шрифты и стили нормализации, используемые в приложении.

Если рассматривать по отдельности каждую директорию с точки зрения процесса разделения на микрофронтенды,
можно отменить следующее:

- **components** - главный кандидат на распределение между микрофронтендами. Но абстракции, по типу 
  PopupWithForm следует выносить в отдельный пакет, потому что они будут переиспользоваться несколькими
  микрофронтендами.
- **blocks** можно оставить в корневом приложении. Все стили указываются с помощью className, поэтому с
  этим не должно быть никаких проблем. То же самое касается **images** и **vendors**.
- **contexts** нужно переносить в отдельный пакет, поскольку контекст CurrentUserContext будет
  переиспользоваться несколькими микрофронтендами.
- Утилиты из **utils** нужно перенести в отдельные пакеты, так как эти утилиты будут переиспользоваться 
  другими микрофронтендами.
- можно оставить в корневом приложении, так как ни один из компонентов не использует эти утилиты
  напрямую.
  
# Уровень 2

В первую очередь следует перенести самые независимые части приложения. Из таких частей можно выделить следующие:

- утилиты API,
- утилиты аутентификации,
- абстракция попапа (она переиспользуется другими попапами).

Следующим этапом следует выносить в микрофронтенды компоненты, которые завязаны на работу с сущностями на бэке,
такими как:

- пользователь (компоненты аутентификации, Login и Register; попапы, EditProfilePopup и EditAvatarProfile)
- место (компонент Card и попап AddPlacePopup).

Все остальные компоненты не имеет смысла выносить в отдельные микрофронтенды, поскольку никак не повлияют
на общую производительность корневого приложения.

## Перенос утилит API в отдельный пакет.

Эти утилиты будут переиспользованы в других микрофронтендах, поэтому они тоже подлежат переносу в отдельный
api-package.

## Перенос контекста в отдельный пакет

Контекст без проблем переносится в отдельный микрофронтенд. Необходимо только указать необходимые библиотеки,
которые используются в микрофронтенде, такие, как **react**. Также необходимо подключить пакет утилит
API и перенести эффект-хук для получения текущего пользователя и его карточек.

После переноса микрофронтенд подключается в webpack.config.js корневого приложения и импортируется в корневое
приложение с заменой хука получения текущего пользователя и его карточек.

## Перенос утилит аутентификации в отдельный пакет

Эти утилиты будут переиспользованы в пакете страниц аутентификации, поэтому были вынесены в отдельный пакет
auth-package.

## Перенос компонентов входа и регистрации

Два компонента Login и Register следует перенести в отдельный микрофронтенд, чтобы можно было регулировать 
нагрузку на процессы регистрации и аутентификации. После переноса нужно не забыть подключить пакет утилит
аутентификации.

После переноса также необходимо подключить эти два компонента в корневое приложение.

## Перенос абстракции попапа

Эта абстракция используется несколькими попапами, поэтому следует вынести её в отдельный микрофронтенд, чтобы
получить возможность переиспользования.

## Перенос попапов редактирования профиля пользователя

Два попапа с редактированием профиля и аватара необходимо перенести в отдельный микрофронтенд. В процессе 
переноса необходимо подключить контекст текущего пользователя для автозаполнения данных в попапе редактирования
профиля и подключить пакет с утилитами API.

После переноса необходимо подключить оба попапа в корневое приложение.

## Перенос карточки с изображением

Переносится вместе со всеми колбэками к API. К микрофронтенду подключается контекст текущего пользователя и 
API утилиты.

После переноса подключается в корневое приложение.

## Перенос попапа добавления нового места

Процесс идентичен переносу попапа редактирования профиля пользователя.